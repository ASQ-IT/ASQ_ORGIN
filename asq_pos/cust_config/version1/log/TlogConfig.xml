<?xml version="1.0" encoding="UTF-8"?>
<LogDefinitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="LogConfig.xsd">
  <!-- ***************************************************** -->
  <!-- ** ROUTING RULES -->
  <!-- ***************************************************** -->
  <sections>
   <section name="tran_header_detail">
      <xml><![CDATA[
        <dtv:OrganizationID>#{getOrganizationId}</dtv:OrganizationID>
        <RetailStoreID>#{getRetailLocationId}</RetailStoreID>
        <WorkstationID>#{getWorkstationId}</WorkstationID>
        <AlternateStoreNbr>!{asq.pos.docbuilder.AsqAlternateStoreNumber}</AlternateStoreNbr>
        <TillID>#{getSessionId}</TillID>
        <dtv:CashDrawerID>#{getCashDrawerId}</dtv:CashDrawerID>
        <SequenceNumber>#{getTransactionSequence}</SequenceNumber>
        <BusinessDayDate>#{getBusinessDate}[date]</BusinessDayDate>
        <BeginDateTime>#{getBeginDatetimestamp}[datetime]</BeginDateTime>
        <EndDateTime>#{getEndDatetimestamp}[datetime]</EndDateTime>
        <OperatorID>#{getOperatorParty.getEmployeeId}</OperatorID>
        <FormFactor>#{getFormFactor}</FormFactor>
        <CurrencyCode>#{dtv.pos.common.ConfigurationMgr.getLocalCurrencyId}</CurrencyCode>
        <dtv:FiscalNumber>#{getFiscalNumber}</dtv:FiscalNumber>
        <dtv:DeviceId>#{getDeviceId}</dtv:DeviceId>
        <dtv:FiscalSessionNumber>#{getFiscalSessionNumber}</dtv:FiscalSessionNumber>     
        <!--<?iterator method="getProperties"?>
        <dtv:PosTransactionProperties>
          <dtv:PosTransactionPropertyCode>#{getPropertyCode}</dtv:PosTransactionPropertyCode>
          <dtv:PosTransactionPropertyValue>#{getPropertyValue}</dtv:PosTransactionPropertyValue>
        </dtv:PosTransactionProperties>
        <?_iterator?>-->
      ]]></xml>
    </section>
    
    <!-- Asq TOLA Item Poslog Changes starts -->
    <section name="sale_return_item">
      <xml><![CDATA[
      	<?condition method="getItem.getOptions.getUnitOfMeasureCode" comparison="NOT_EQUAL" value="TOLA"?>
      	<?condition method="getItem.getOptions.getUnitOfMeasureCode" comparison="NOT_EQUAL" value="HTOLA"?>
      	<?condition method="getItem.getOptions.getUnitOfMeasureCode" comparison="NOT_EQUAL" value="QTOLA"?>
		    	<ItemID>#{getItemId.trim}</ItemID>
	   	 		<Quantity>#{getQuantity}[quantity]</Quantity>  	
	    <?_condition?>
        <?_condition?>
        <?_condition?>
        
	    <?condition method="getItem.getOptions.getUnitOfMeasureCode" comparison="EQUAL" value="TOLA"?>
	    	<?sectionref name="asq_sale_return_item_tola"?> 
	    <?_condition?>
	    <?condition method="getItem.getOptions.getUnitOfMeasureCode" comparison="EQUAL" value="HTOLA"?>
	    	<?sectionref name="asq_sale_return_item_tola"?> 
	    <?_condition?>
	    <?condition method="getItem.getOptions.getUnitOfMeasureCode" comparison="EQUAL" value="QTOLA"?> 
	    	<?sectionref name="asq_sale_return_item_tola"?> 
	    <?_condition?>   
	    	
        <Description>#{getItemDescription}</Description>
        <dtv:FiscalItemID>#{getItem.getOptions.getFiscalItemId}</dtv:FiscalItemID>
        <dtv:FiscalItemDescription>#{getItem.getOptions.getFiscalItemDescription}</dtv:FiscalItemDescription>
        <UnitCostPrice>#{getItem.getOptions.getUnitCost}[money]</UnitCostPrice>
        <UnitListPrice>#{getItem.getListPrice}[money]</UnitListPrice>
        <RegularSalesUnitPrice>#{getRegularBasePrice}[money]</RegularSalesUnitPrice>
        <ActualSalesUnitPrice>#{getUnitPrice}[money]</ActualSalesUnitPrice>
        <ExtendedAmount>#{getExtendedAmount}[money]</ExtendedAmount>
        <dtv:UnitOfMeasureCode>#{getItem.getOptions.getUnitOfMeasureCode}</dtv:UnitOfMeasureCode> 
        <?sectionref name="item_merchandise_hierarchy"?>    

      ]]></xml>
    </section>
    
    <section name="asq_sale_return_item_tola">
      <xml><![CDATA[
         <?iterator method="getProperties"?>
		       <?condition method="getPropertyCode" comparison="EQUAL" value="INVENTORY_TOLA_ITEM"?>
		            <ItemID>#{getPropertyValue}</ItemID>
		       <?_condition?>
		       <?condition method="getPropertyCode" comparison="EQUAL" value="INVENTORY_TOLA_ITEM_WEIGHT"?>
		       		<Quantity>#{getPropertyValue}</Quantity>
		       <?_condition?>
		 <?_iterator?>
		]]></xml>
    </section>   
    <!-- Asq TOLA Item Poslog Changes ends -->
    
  </sections>
</LogDefinitions>